<p id="notice"><%= notice %></p>
<div class='row'>
  <div class='col'>
    <h1>Parent Objects</h1>
  </div>
  <div class='col'>
    <div class='float-right button-list'>
      <%= link_to 'New Parent Object', new_parent_object_path, class: 'btn btn-primary' %>
      <%= button_to 'Reindex', reindex_parent_objects_path, method: 'post', class: 'btn btn-secondary', id: 'reindex', data:{confirm: "Are you sure you want to proceed? This action will reindex the entire contents of the system."}, disabled: !(can? :reindex_all, ParentObject) %>
      <%= button_to 'Update Metadata', all_metadata_parent_objects_path, method: 'post', class: 'btn btn-secondary',id: 'update_metadata', data:{confirm: "Are you sure you want to proceed?  This action will update metadata for the entire contents of the system."}, disabled: !(can? :update_metadata, ParentObject) %>
    </div>
  </div>
</div>
<div class='row'>
  <div class='col overflow-auto'>
    <table id="parent-objects-datatable" class="is-datatable table table-responsive table-bordered table-striped" data-source="<%= parent_objects_path(format: :json) %>">
      <thead  class="thead-dark">
        <tr>
          <th scope="col">Oid</th>
          <th scope="col">Authoritative Source</th>
          <th scope="col">Child object count</th>
          <th scope="col">Bib</th>
          <th scope="col">Holding</th>
          <th scope="col">Item</th>
          <th scope="col">Barcode</th>
          <th scope="col">Aspace uri</th>
          <th scope="col">Last ladybird update</th>
          <th scope="col">Last voyager update</th>
          <th scope="col">Last aspace update</th>
          <th scope="col">Last id update</th>
          <th scope="col">Visibility</th>
          <th scope="col">Actions</th>
        </tr>
      </thead>
      <tbody>
      </tbody>
    </table>
  </div>
</div>

<div id="parent-objects-data" class='d-none datatable-data'>
  <%= ParentObjectDatatable.new(nil).view_columns.map {|key, value| {data: key, orderable: value[:orderable], searchable: value[:searchable], options: value[:options]} }.to_json %>
</div>
